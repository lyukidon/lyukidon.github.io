import{s as gs,h as ts,i as rs,n as hs}from"../chunks/scheduler.dd918b38.js";import{S as ws,i as As,r as ks,u as js,v as Cs,d as Ts,t as bs,w as xs,g as p,s as E,m as v,H as _,h as t,A as is,c as u,j as i,n as m,F as f,f as n,a as g,y as l}from"../chunks/index.94d1baeb.js";import{P as Is,g as Bs,a as ys}from"../chunks/post_layout.0e7f7691.js";function Ls(h){let s,d="JWT 사용방법",y,r,a='npm: <a href="https://www.npmjs.com/package/jsonwebtoken" rel="nofollow noopener noreferrer external" target="_blank">https://www.npmjs.com/package/jsonwebtoken</a>',c,F,w,U,L,Ds=`<pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" bash="true"><div class="language-id">bash</div><div class='code-container'><code><div class='line'><span style="color: #EEFFFF">npm i jsonwebtoken</span></div></code></div></pre>`,W,A,K,S,Es=`<pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" js="true"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #89DDFF">import</span><span style="color: #EEFFFF"> jwt </span><span style="color: #89DDFF">from</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">jsonwebtoken</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #546E7A">// or</span></div><div class='line'><span style="color: #C792EA">const</span><span style="color: #EEFFFF"> jwt </span><span style="color: #89DDFF">=</span><span style="color: #EEFFFF"> </span><span style="color: #82AAFF">require</span><span style="color: #EEFFFF">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">jsonwebtoken</span><span style="color: #89DDFF">"</span><span style="color: #EEFFFF">)</span><span style="color: #89DDFF">;</span></div></code></div></pre>`,q,k,z,P,vs=`<pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" js="true"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #C792EA">const</span><span style="color: #EEFFFF"> accessToken </span><span style="color: #89DDFF">=</span><span style="color: #EEFFFF"> jwt</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">sign</span><span style="color: #EEFFFF">(payload</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> secretkey</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> options)</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #546E7A">// example</span></div><div class='line'><span style="color: #C792EA">const</span><span style="color: #EEFFFF"> accessToken </span><span style="color: #89DDFF">=</span><span style="color: #EEFFFF"> jwt</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">sign</span><span style="color: #EEFFFF">(</span><span style="color: #89DDFF">&#123;</span><span style="color: #EEFFFF"> </span><span style="color: #F07178">id</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">lyu</span><span style="color: #89DDFF">"</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#125;,</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">randomSecretKey</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">algorithm</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">HS256</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 암호화 방식</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">expiresIn</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">12h</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 만료 기간</span></div><div class='line'><span style="color: #EEFFFF">    notBefore</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 설정한 시간 이전까지는 작동하지 않도록 하는 옵션</span></div><div class='line'><span style="color: #EEFFFF">    audience</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    issuer</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    jwtid</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    subject</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    noTimestamp</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    header</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    keyid</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">mutatePayload</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> boolean</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 키가 생성되기 전에, payload 값을 변경</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">allowInsecureKeySizes</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> boolean</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 2048 미만의 모듈러스 개인 키를 RSA에 사용할 수 있음</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">allowInvalidAsymmetricKeyTypes</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> boolean </span><span style="color: #546E7A">// (이전 버전 호환용) 지정된 알고리즘과 다른 비대칭 키를 허용</span></div><div class='line'><span style="color: #89DDFF">&#125;</span><span style="color: #EEFFFF">)</span><span style="color: #89DDFF">;</span></div></code></div></pre>`,M,j,R,O,us=`<pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" js="true"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #C792EA">const</span><span style="color: #EEFFFF"> decoded </span><span style="color: #89DDFF">=</span><span style="color: #EEFFFF"> jwt</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">verify</span><span style="color: #EEFFFF">(token</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> secretkey</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> options</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> callback)</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #546E7A">// example</span></div><div class='line'><span style="color: #C792EA">const</span><span style="color: #EEFFFF"> decoded </span><span style="color: #89DDFF">=</span><span style="color: #EEFFFF"> jwt</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">verify</span><span style="color: #EEFFFF">(</span></div><div class='line'><span style="color: #EEFFFF">    token</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">secretkey</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #EEFFFF">        </span><span style="color: #F07178">algorithm</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">HS256</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 암호화 방식</span></div><div class='line'><span style="color: #EEFFFF">        audience</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">        complete</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 해석된 &#123; payload, header, signature &#125;를 반환 (기존은 payload만 반환)</span></div><div class='line'><span style="color: #EEFFFF">        issuer</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">        jwtid</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// JWT ID를 확인할 때 사용</span></div><div class='line'><span style="color: #EEFFFF">        ignoreExpiration</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 만료 기간을 확인하지 않고 인증</span></div><div class='line'><span style="color: #EEFFFF">        subject</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">        clockTolerance</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">        maxAge</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #546E7A">// 만료기간을 최대 기간으로 설정</span></div><div class='line'><span style="color: #EEFFFF">        clockTimestamp</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">        nonce</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #EEFFFF">        allowInvalidAsymmetricKeyTypes</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #89DDFF">&#125;,</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #89DDFF">(</span><span style="color: #EEFFFF">err</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> decoded</span><span style="color: #89DDFF">)</span><span style="color: #EEFFFF"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;&#125;</span></div><div class='line'><span style="color: #EEFFFF">)</span><span style="color: #89DDFF">;</span></div></code></div></pre>`,$,C,T,Z,D,b,G,J,ms=`<pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" js="true"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #FFCB6B">name</span><span style="color: #89DDFF">:</span><span style="color: #F07178"> </span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">TokenExpiredError</span><span style="color: #89DDFF">'</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #FFCB6B">message</span><span style="color: #89DDFF">:</span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">jwt expired</span><span style="color: #89DDFF">'</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #EEFFFF">expiredAt</span></div><div class='line'><span style="color: #89DDFF">&#125;</span></div></code></div></pre>`,Q,x,V,N,_s=`<pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" js="true"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #FFCB6B">name</span><span style="color: #89DDFF">:</span><span style="color: #F07178"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">JsonWebTokenError</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #FFCB6B">message</span><span style="color: #89DDFF">:</span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">invalid token</span><span style="color: #89DDFF">'</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #89DDFF">    </span><span style="color: #546E7A">// 'invalid token' - the header or payload could not be parsed</span></div><div class='line'><span style="color: #89DDFF">    </span><span style="color: #546E7A">// 'jwt malformed' - the token does not have three components (delimited by a .)</span></div><div class='line'><span style="color: #89DDFF">    </span><span style="color: #546E7A">// 'jwt signature is required'</span></div><div class='line'><span style="color: #89DDFF">    </span><span style="color: #546E7A">// 'invalid signature'</span></div><div class='line'><span style="color: #89DDFF">    </span><span style="color: #546E7A">// 'jwt audience invalid. expected: [OPTIONS AUDIENCE]'</span></div><div class='line'><span style="color: #89DDFF">    </span><span style="color: #546E7A">// 'jwt issuer invalid. expected: [OPTIONS ISSUER]'</span></div><div class='line'><span style="color: #89DDFF">    </span><span style="color: #546E7A">// 'jwt id invalid. expected: [OPTIONS JWT ID]'</span></div><div class='line'><span style="color: #89DDFF">    </span><span style="color: #546E7A">// 'jwt subject invalid. expected: [OPTIONS SUBJECT]'</span></div><div class='line'><span style="color: #89DDFF">&#125;</span></div></code></div></pre>`,X,I,Y,H,fs=`<pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" js="true"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #FFCB6B">name</span><span style="color: #89DDFF">:</span><span style="color: #F07178"> </span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">NotBeforeError</span><span style="color: #89DDFF">'</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #FFCB6B">message</span><span style="color: #89DDFF">:</span><span style="color: #F07178"> </span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">jwt not active</span><span style="color: #89DDFF">'</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #EEFFFF">date</span></div><div class='line'><span style="color: #89DDFF">&#125;</span></div></code></div></pre>`;return{c(){s=p("p"),s.textContent=d,y=E(),r=p("p"),r.innerHTML=a,c=E(),F=p("ol"),w=p("li"),U=v("설치하기"),L=new _(!1),W=E(),A=p("li"),K=v("모듈 불러오기"),S=new _(!1),q=E(),k=p("li"),z=v("Access Token 생성하기"),P=new _(!1),M=E(),j=p("li"),R=v("Access Token 해석하기"),O=new _(!1),$=E(),C=p("ul"),T=p("li"),Z=v("에러 확인하기"),D=p("ul"),b=p("li"),G=v("토큰 만료 에러"),J=new _(!1),Q=E(),x=p("li"),V=v("토큰 에러"),N=new _(!1),X=E(),I=p("li"),Y=v("NotBefore 에러"),H=new _(!1),this.h()},l(o){s=t(o,"P",{"data-svelte-h":!0}),is(s)!=="svelte-ksgtza"&&(s.textContent=d),y=u(o),r=t(o,"P",{"data-svelte-h":!0}),is(r)!=="svelte-vaaiwa"&&(r.innerHTML=a),c=u(o),F=t(o,"OL",{});var e=i(F);w=t(e,"LI",{});var ss=i(w);U=m(ss,"설치하기"),L=f(ss,!1),ss.forEach(n),W=u(e),A=t(e,"LI",{});var ls=i(A);K=m(ls,"모듈 불러오기"),S=f(ls,!1),ls.forEach(n),q=u(e),k=t(e,"LI",{});var as=i(k);z=m(as,"Access Token 생성하기"),P=f(as,!1),as.forEach(n),M=u(e),j=t(e,"LI",{});var ns=i(j);R=m(ns,"Access Token 해석하기"),O=f(ns,!1),ns.forEach(n),e.forEach(n),$=u(o),C=t(o,"UL",{});var cs=i(C);T=t(cs,"LI",{});var os=i(T);Z=m(os,"에러 확인하기"),D=t(os,"UL",{});var B=i(D);b=t(B,"LI",{});var es=i(b);G=m(es,"토큰 만료 에러"),J=f(es,!1),es.forEach(n),Q=u(B),x=t(B,"LI",{});var Fs=i(x);V=m(Fs,"토큰 에러"),N=f(Fs,!1),Fs.forEach(n),X=u(B),I=t(B,"LI",{});var ps=i(I);Y=m(ps,"NotBefore 에러"),H=f(ps,!1),ps.forEach(n),B.forEach(n),os.forEach(n),cs.forEach(n),this.h()},h(){L.a=null,S.a=null,P.a=null,O.a=null,J.a=null,N.a=null,H.a=null},m(o,e){g(o,s,e),g(o,y,e),g(o,r,e),g(o,c,e),g(o,F,e),l(F,w),l(w,U),L.m(Ds,w),l(F,W),l(F,A),l(A,K),S.m(Es,A),l(F,q),l(F,k),l(k,z),P.m(vs,k),l(F,M),l(F,j),l(j,R),O.m(us,j),g(o,$,e),g(o,C,e),l(C,T),l(T,Z),l(T,D),l(D,b),l(b,G),J.m(ms,b),l(D,Q),l(D,x),l(x,V),N.m(_s,x),l(D,X),l(D,I),l(I,Y),H.m(fs,I)},p:hs,d(o){o&&(n(s),n(y),n(r),n(c),n(F),n($),n(C))}}}function Ss(h){let s,d;const y=[h[0],ds];let r={$$slots:{default:[Ls]},$$scope:{ctx:h}};for(let a=0;a<y.length;a+=1)r=ts(r,y[a]);return s=new Is({props:r}),{c(){ks(s.$$.fragment)},l(a){js(s.$$.fragment,a)},m(a,c){Cs(s,a,c),d=!0},p(a,[c]){const F=c&1?Bs(y,[c&1&&ys(a[0]),c&0&&ys(ds)]):{};c&2&&(F.$$scope={dirty:c,ctx:a}),s.$set(F)},i(a){d||(Ts(s.$$.fragment,a),d=!0)},o(a){bs(s.$$.fragment,a),d=!1},d(a){xs(s,a)}}}const ds={title:"JWT 사용방법",image:"",alt:"Urara",created:"2024-01-31T00:00:00.000Z",updated:"2024-01-31T00:00:00.000Z",tags:["jwt","token"],images:[],slug:"/Javascript/TIL/jwt/usage/+page.md",path:"/Javascript/TIL/jwt/usage",toc:!1};function Ps(h,s,d){return h.$$set=y=>{d(0,s=ts(ts({},s),rs(y)))},s=rs(s),[s]}class Ns extends ws{constructor(s){super(),As(this,s,Ps,Ss,gs,{})}}export{Ns as component};
