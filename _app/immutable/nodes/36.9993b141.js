import{s as S,h as m,i as _,n as x}from"../chunks/scheduler.dd918b38.js";import{S as I,i as R,r as T,u as $,v as j,d as M,t as w,w as L,g as D,s as g,H as O,h as d,j as f,A as C,c as h,F as H,f as v,a as P,y as r}from"../chunks/index.94d1baeb.js";import{P as b,g as k,a as A}from"../chunks/post_layout.697a27d1.js";function J(p){let s,n,a,e="redis.service.ts",l,o,y=`<pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" ts="true"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #89DDFF">import</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;</span><span style="color: #F07178"> </span><span style="color: #EEFFFF">Injectable</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #EEFFFF">OnModuleInit</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #EEFFFF">OnModuleDestroy</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&#125;</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">from</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">@nestjs/common</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #89DDFF">import</span><span style="color: #EEFFFF"> Redis </span><span style="color: #89DDFF">from</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">ioredis</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #89DDFF">import</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;</span><span style="color: #F07178"> </span><span style="color: #EEFFFF">ConfigService</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&#125;</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">from</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">@nestjs/config</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">;</span></div><div class='line'></div><div class='line'><span style="color: #89DDFF">@</span><span style="color: #82AAFF">Injectable</span><span style="color: #EEFFFF">()</span></div><div class='line'><span style="color: #89DDFF">export</span><span style="color: #EEFFFF"> </span><span style="color: #C792EA">class</span><span style="color: #EEFFFF"> </span><span style="color: #FFCB6B">RedisService</span><span style="color: #EEFFFF"> </span><span style="color: #C792EA">implements</span><span style="color: #EEFFFF"> </span><span style="color: #FFCB6B">OnModuleInit</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #FFCB6B">OnModuleDestroy</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #EEFFFF">  </span><span style="color: #C792EA">private</span><span style="color: #EEFFFF"> </span><span style="color: #F07178">redisClient</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #FFCB6B">Redis</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #EEFFFF">  </span><span style="color: #C792EA">constructor</span><span style="color: #89DDFF">(</span><span style="color: #C792EA">private</span><span style="color: #EEFFFF"> </span><span style="color: #C792EA">readonly</span><span style="color: #EEFFFF"> configService</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #FFCB6B">ConfigService</span><span style="color: #89DDFF">)</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">redisClient</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">Redis</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">      host</span><span style="color: #89DDFF">:</span><span style="color: #F07178"> </span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">configService</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">get</span><span style="color: #89DDFF">&lt;</span><span style="color: #FFCB6B">string</span><span style="color: #89DDFF">&gt;</span><span style="color: #F07178">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">REDIS_HOST</span><span style="color: #89DDFF">"</span><span style="color: #F07178">)</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #F07178">      port</span><span style="color: #89DDFF">:</span><span style="color: #F07178"> </span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">configService</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">get</span><span style="color: #89DDFF">&lt;</span><span style="color: #FFCB6B">number</span><span style="color: #89DDFF">&gt;</span><span style="color: #F07178">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">REDIS_PORT</span><span style="color: #89DDFF">"</span><span style="color: #F07178">)</span><span style="color: #89DDFF">,</span></div><div class='line'><span style="color: #F07178">      password</span><span style="color: #89DDFF">:</span><span style="color: #F07178"> </span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">configService</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">get</span><span style="color: #89DDFF">&lt;</span><span style="color: #FFCB6B">string</span><span style="color: #89DDFF">&gt;</span><span style="color: #F07178">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">REDIS_PASSWORD</span><span style="color: #89DDFF">"</span><span style="color: #F07178">)</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #89DDFF">&#125;</span><span style="color: #F07178">)</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #F07178">  </span><span style="color: #89DDFF">&#125;</span></div><div class='line'><span style="color: #EEFFFF">  </span><span style="color: #F07178">onModuleInit</span><span style="color: #89DDFF">()</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">redisClient</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">on</span><span style="color: #F07178">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">connect</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">      </span><span style="color: #EEFFFF">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">Connected to Redis</span><span style="color: #89DDFF">"</span><span style="color: #F07178">)</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #89DDFF">&#125;</span><span style="color: #F07178">)</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #F07178">  </span><span style="color: #89DDFF">&#125;</span></div><div class='line'><span style="color: #EEFFFF">  </span><span style="color: #F07178">onModuleDestroy</span><span style="color: #89DDFF">()</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">redisClient</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">disconnect</span><span style="color: #F07178">()</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #F07178">  </span><span style="color: #89DDFF">&#125;</span></div><div class='line'><span style="color: #EEFFFF">  </span><span style="color: #C792EA">get</span><span style="color: #EEFFFF"> </span><span style="color: #F07178">client</span><span style="color: #89DDFF">():</span><span style="color: #EEFFFF"> </span><span style="color: #FFCB6B">Redis</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&#123;</span></div><div class='line'><span style="color: #F07178">    </span><span style="color: #89DDFF">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">redisClient</span><span style="color: #89DDFF">;</span></div><div class='line'><span style="color: #F07178">  </span><span style="color: #89DDFF">&#125;</span></div><div class='line'><span style="color: #89DDFF">&#125;</span></div></code></div></pre>`,E,F,u="<p>사용</p> <ol><li>사용하고자 하는 모듈의 imports에 추가</li> <li><code>this.redisService.client</code>로 사용하면 <code>this.redisClient</code>를 받을 수 있음</li></ol>";return{c(){s=D("ul"),n=D("li"),a=D("p"),a.textContent=e,l=g(),o=new O(!1),E=g(),F=D("li"),F.innerHTML=u,this.h()},l(c){s=d(c,"UL",{});var t=f(s);n=d(t,"LI",{});var i=f(n);a=d(i,"P",{"data-svelte-h":!0}),C(a)!=="svelte-ps6z27"&&(a.textContent=e),l=h(i),o=H(i,!1),i.forEach(v),E=h(t),F=d(t,"LI",{"data-svelte-h":!0}),C(F)!=="svelte-1qkxwy5"&&(F.innerHTML=u),t.forEach(v),this.h()},h(){o.a=null},m(c,t){P(c,s,t),r(s,n),r(n,a),r(n,l),o.m(y,n),r(s,E),r(s,F)},p:x,d(c){c&&v(s)}}}function q(p){let s,n;const a=[p[0],B];let e={$$slots:{default:[J]},$$scope:{ctx:p}};for(let l=0;l<a.length;l+=1)e=m(e,a[l]);return s=new b({props:e}),{c(){T(s.$$.fragment)},l(l){$(s.$$.fragment,l)},m(l,o){j(s,l,o),n=!0},p(l,[o]){const y=o&1?k(a,[o&1&&A(l[0]),o&0&&A(B)]):{};o&2&&(y.$$scope={dirty:o,ctx:l}),s.$set(y)},i(l){n||(M(s.$$.fragment,l),n=!0)},o(l){w(s.$$.fragment,l),n=!1},d(l){L(s,l)}}}const B={title:"NestJS에서 Redis 연결하기",image:"",alt:"",created:"2024-04-22T00:00:00.000Z",updated:"2024-04-22T00:00:00.000Z",tags:["redis"],images:[],slug:"/Javascript/TIL/redis/nestjs/+page.md",path:"/Javascript/TIL/redis/nestjs",toc:!1};function Z(p,s,n){return p.$$set=a=>{n(0,s=m(m({},s),_(a)))},s=_(s),[s]}class W extends I{constructor(s){super(),R(this,s,Z,q,S,{})}}export{W as component};
